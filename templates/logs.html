{% extends "base.html" %}

{% block content %}
    <h2>Daily Mental & Productivity Log</h2>

    <form method="POST" class="log-form">
        <h3>Log for Today ({{ today.strftime('%b %d') }})</h3>
        
        <div class="form-row">
            <label for="mood">Current Mood:</label>
            <select id="mood" name="mood">
                {% set current_mood = log.mood if log else 'Neutral' %}
                <option value="Good" {% if current_mood == 'Good' %}selected{% endif %}>Good</option>
                <option value="Neutral" {% if current_mood == 'Neutral' %}selected{% endif %}>Neutral</option>
                <option value="Low" {% if current_mood == 'Low' %}selected{% endif %}>Low</option>
            </select>
        </div>

        <div class="form-row">
            <label for="urge_level">Urge Level (1-10): {{ log.urge_level if log else '1' }}</label>
            <input type="range" id="urge_level" name="urge_level" min="1" max="10" value="{{ log.urge_level if log else '1' }}">
        </div>

        <div class="form-row">
            <label for="productivity">Productivity (1-5):</label>
            <select id="productivity" name="productivity">
                {% set current_prod = log.productivity if log else 3 %}
                {% for i in range(1, 6) %}
                    <option value="{{ i }}" {% if current_prod == i %}selected{% endif %}>{{ i }} - {{ {1:'Very Low', 2:'Low', 3:'Neutral', 4:'High', 5:'Very High'}[i] }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Save Daily Log</button>
    </form>

    <h3 class="mt-4">Past 14 Days Logs</h3>
    {% if past_logs %}
        <table class="data-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Mood</th>
                    <th>Urge</th>
                    <th>Productivity</th>
                </tr>
            </thead>
            <tbody>
                {% for log in past_logs %}
                <tr>
                    <td>{{ log.date.strftime('%b %d') }}</td>
                    <td>{{ log.mood }}</td>
                    <td>{{ log.urge_level }}</td>
                    <td>{{ log.productivity }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No past logs available.</p>
    {% endif %}

{% endblock %}